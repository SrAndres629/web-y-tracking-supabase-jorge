{# ═══════════════════════════════════════════════════════════════ #}
{# WHATSAPP BUTTON - Componente Reutilizable                      #}
{# Variantes: floating (default), sticky-mobile                   #}
{# ═══════════════════════════════════════════════════════════════ #}

{% set variant = variant | default('floating') %}
{% set phone = contact.whatsapp | default('https://wa.me/59164714751') %}
{% set text = contact.cta_text | default('Hola, quiero agendar una consulta') %}

{% if variant == 'floating' %}
{# Botón flotante premium (desktop + tablet) #}
<div class="whatsapp-premium-container hidden md:block">
    <div id="experienceBadge" class="experience-mini-badge">
        <img src="/static/assets/images/hero/jorge_hero_new.webp" alt="Jorge Aguirre Flores" loading="lazy">
        <span>30 Años de Arte</span>
    </div>

    <div id="whatsappTooltip" class="whatsapp-tooltip">
        ¿Dudas? Habla con el especialista aquí
    </div>

    <button id="whatsappPremium" type="button" 
        onclick="handleConversion('WhatsApp {{ variant }}')"
        class="whatsapp-premium-btn" 
        aria-label="Contactar por WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </button>
</div>

{% elif variant == 'sticky-mobile' %}
{# Sticky CTA bar (solo móvil) #}
<div class="fixed bottom-0 left-0 right-0 bg-black/80 backdrop-blur-xl border-t border-white/10 p-4 
            flex items-center justify-between z-[1000] md:hidden 
            shadow-[0_-10px_30px_rgba(0,0,0,0.5)]">
    <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-full border border-luxury-gold p-0.5">
            <img src="/static/assets/images/hero/jorge_hero_new.webp" 
                 class="w-full h-full object-cover rounded-full"
                 alt="Jorge Aguirre" loading="lazy">
        </div>
        <div>
            <p class="text-white text-xs font-bold leading-tight">Jorge Aguirre Flores</p>
            <p class="text-luxury-gold text-[10px] uppercase tracking-tighter">Especialista Elite</p>
        </div>
    </div>
    <a href="{{ phone }}?text={{ text | urlencode }}" 
       target="_blank"
       rel="noopener noreferrer"
       onclick="handleConversion('WhatsApp Sticky Mobile')"
       class="bg-luxury-gold text-black px-5 py-2.5 rounded-full text-[10px] font-bold 
              shadow-lg shadow-luxury-gold/30 active:scale-95 transition-transform 
              animate-pulse whitespace-nowrap">
        AGENDAR CITA
    </a>
</div>
{% endif %}
