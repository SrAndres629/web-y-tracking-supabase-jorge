<!-- ========== UNIFIED MAIN NAVIGATION ========== -->
<nav id="mainNav"
    class="fixed top-0 w-full z-50 transition-all duration-500 backdrop-blur-md bg-luxury-black/80 border-b border-white/5">
    <div class="container mx-auto px-6 py-4 flex justify-between items-center">
        <!-- Logo -->
        <a href="#"
            class="text-luxury-gold font-serif text-2xl font-bold tracking-wide transition-transform hover:scale-105 flex items-center h-10">
            Jorge Aguirre Flores
        </a>

        <!-- Desktop Menu -->
        <ul class="hidden md:flex space-x-8 text-sm font-medium text-gray-300">
            <li><a href="#galeria" class="hover:text-luxury-gold transition-colors relative group">
                    Galería
                    <span
                        class="absolute -bottom-1 left-0 w-0 h-0.5 bg-luxury-gold transition-all duration-300 group-hover:w-full"></span>
                </a></li>
            <li><a href="#servicios" class="hover:text-luxury-gold transition-colors relative group">
                    Servicios
                    <span
                        class="absolute -bottom-1 left-0 w-0 h-0.5 bg-luxury-gold transition-all duration-300 group-hover:w-full"></span>
                </a></li>
            <li><a href="#proceso" class="hover:text-luxury-gold transition-colors relative group">
                    Proceso
                    <span
                        class="absolute -bottom-1 left-0 w-0 h-0.5 bg-luxury-gold transition-all duration-300 group-hover:w-full"></span>
                </a></li>
            <li><a href="#testimonios" class="hover:text-luxury-gold transition-colors relative group">
                    Testimonios
                    <span
                        class="absolute -bottom-1 left-0 w-0 h-0.5 bg-luxury-gold transition-all duration-300 group-hover:w-full"></span>
                </a></li>
        </ul>

        <div class="flex items-center gap-4">
            <!-- CTA Button (Visible on scroll via JS) -->
            <button id="navCta" type="button" onclick="handleConversion('Nav CTA')"
                class="hidden md:flex opacity-0 translate-y-[-10px] transition-all duration-500 btn-primary items-center gap-2 shadow-glow-gold">
                <i class="fab fa-whatsapp text-lg"></i> Agendar
            </button>

            <!-- Mobile Menu Button -->
            <button id="mobileMenuBtn" type="button" class="md:hidden text-luxury-gold text-2xl focus:outline-none"
                aria-label="Menu">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobileMenu"
        class="fixed inset-0 bg-luxury-black/98 backdrop-blur-xl z-[60] hidden flex-col items-center justify-center space-y-8 touch-none"
        onclick="closeMobileMenuOnOutside(event)">
        <button type="button" class="absolute top-6 right-6 text-white/50 hover:text-white text-4xl"
            aria-label="Cerrar menú"
            onclick="closeMobileMenu()">
            &times;
        </button>
        <a href="#galeria" class="text-2xl font-serif text-white hover:text-luxury-gold transition-colors" onclick="closeMobileMenu()">Galería</a>
        <a href="#servicios"
            class="text-2xl font-serif text-white hover:text-luxury-gold transition-colors" onclick="closeMobileMenu()">Servicios</a>
        <a href="#proceso" class="text-2xl font-serif text-white hover:text-luxury-gold transition-colors" onclick="closeMobileMenu()">Proceso</a>
        <a href="#testimonios"
            class="text-2xl font-serif text-white hover:text-luxury-gold transition-colors" onclick="closeMobileMenu()">Testimonios</a>
        <button type="button" onclick="handleConversion('Mobile Menu CTA'); closeMobileMenu();"
            class="mt-8 px-8 py-4 border border-luxury-gold text-luxury-gold uppercase tracking-widest text-sm rounded-lg hover:bg-luxury-gold hover:text-black transition-all">
            Agendar Cita
        </button>
    </div>
</nav>

<script>
    // Mobile menu handlers
    function closeMobileMenu() {
        document.getElementById('mobileMenu').classList.add('hidden');
        document.getElementById('mobileMenuBtn').style.display = 'block';
        document.body.style.overflow = '';
    }
    
    function closeMobileMenuOnOutside(event) {
        if (event.target.id === 'mobileMenu') {
            closeMobileMenu();
        }
    }
    
    // Close on ESC key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            const menu = document.getElementById('mobileMenu');
            if (menu && !menu.classList.contains('hidden')) {
                closeMobileMenu();
            }
        }
    });
    
    // Close on scroll (optional UX improvement)
    let lastScrollY = window.scrollY;
    window.addEventListener('scroll', function() {
        const menu = document.getElementById('mobileMenu');
        if (menu && !menu.classList.contains('hidden')) {
            // Close if scrolled more than 100px
            if (Math.abs(window.scrollY - lastScrollY) > 100) {
                closeMobileMenu();
            }
        }
        lastScrollY = window.scrollY;
    }, { passive: true });
</script>