#!/bin/bash
# KIMI - THE PLANNER (Powered by Gemini CLI)
# Usage: ./kimi "Plan Request"

# Ensure we are in non-interactive mode
export CI=true
export NON_INTERACTIVE=1

TASK_CONTENT="$1"
SYSTEM_PROMPT="You represent KIMI, the Planning Agent. 
Your goal is to analyze the request and output a detailed step-by-step plan in Markdown format.
Do NOT ask for confirmation. Just output the plan."

# If $1 is a file path, read it
if [ -f "$TASK_CONTENT" ]; then
    TASK_CONTENT=$(cat "$TASK_CONTENT")
fi

# Run Gemini CLI in YOLO mode
gemini -p "$SYSTEM_PROMPT\n\nTASK:\n$TASK_CONTENT" --approval-mode yolo --output-format text
