<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üõ°Ô∏è Antigravity Toolkit</title>
    <link rel="stylesheet" href="/static/toolkit.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <span class="logo-icon">üõ°Ô∏è</span>
                <span class="logo-text">Antigravity</span>
            </div>
            <nav class="nav">
                <a href="#dashboard" class="nav-item active" data-tab="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span>Dashboard</span>
                </a>
                <a href="#memory" class="nav-item" data-tab="memory">
                    <span class="nav-icon">üß†</span>
                    <span>Memoria</span>
                </a>
                <a href="#quota" class="nav-item" data-tab="quota">
                    <span class="nav-icon">‚ö°</span>
                    <span>Quota</span>
                </a>
                <a href="#autocap" class="nav-item" data-tab="autocap">
                    <span class="nav-icon">üéØ</span>
                    <span>Autocapeo</span>
                </a>
                <a href="#settings" class="nav-item" data-tab="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Config</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="status-indicator" id="connectionStatus">
                    <span class="status-dot online"></span>
                    <span>Conectado</span>
                </div>
                <div class="version">v2.0.0</div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <!-- Header -->
            <header class="header">
                <h1 id="pageTitle">Dashboard</h1>
                <div class="header-actions">
                    <button class="btn btn-refresh" id="refreshBtn" title="Refrescar datos">
                        <span class="refresh-icon">üîÑ</span>
                    </button>
                    <button class="btn btn-primary" id="emergencyBtn">
                        <span>üö®</span> Modo Emergencia
                    </button>
                </div>
            </header>

            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard-tab">
                <!-- Quota Cards -->
                <div class="cards-grid">
                    <div class="card card-quota">
                        <div class="card-header">
                            <span class="card-icon">‚ö°</span>
                            <span class="card-title">Quota Disponible</span>
                        </div>
                        <div class="card-body">
                            <div class="quota-display">
                                <div class="quota-circle" id="quotaCircle">
                                    <svg viewBox="0 0 100 100">
                                        <circle class="quota-bg" cx="50" cy="50" r="45"/>
                                        <circle class="quota-progress" cx="50" cy="50" r="45" id="quotaProgress"/>
                                    </svg>
                                    <div class="quota-text">
                                        <span class="quota-percent" id="quotaPercent">0%</span>
                                        <span class="quota-label">usado</span>
                                    </div>
                                </div>
                                <div class="quota-details">
                                    <div class="quota-item">
                                        <span class="quota-value" id="quotaUsed">0</span>
                                        <span class="quota-sublabel">Usado</span>
                                    </div>
                                    <div class="quota-item">
                                        <span class="quota-value" id="quotaRemaining">0</span>
                                        <span class="quota-sublabel">Restante</span>
                                    </div>
                                    <div class="quota-item">
                                        <span class="quota-value" id="quotaTotal">0</span>
                                        <span class="quota-sublabel">Total</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card card-timer">
                        <div class="card-header">
                            <span class="card-icon">‚è∞</span>
                            <span class="card-title">Reset de Quota</span>
                        </div>
                        <div class="card-body">
                            <div class="timer-display" id="timerDisplay">
                                <div class="timer-unit">
                                    <span class="timer-value" id="timerDays">00</span>
                                    <span class="timer-label">d√≠as</span>
                                </div>
                                <span class="timer-separator">:</span>
                                <div class="timer-unit">
                                    <span class="timer-value" id="timerHours">00</span>
                                    <span class="timer-label">horas</span>
                                </div>
                                <span class="timer-separator">:</span>
                                <div class="timer-unit">
                                    <span class="timer-value" id="timerMinutes">00</span>
                                    <span class="timer-label">min</span>
                                </div>
                                <span class="timer-separator">:</span>
                                <div class="timer-unit">
                                    <span class="timer-value" id="timerSeconds">00</span>
                                    <span class="timer-label">seg</span>
                                </div>
                            </div>
                            <div class="timer-info">
                                <span class="reset-date" id="resetDate">Reset: --</span>
                            </div>
                        </div>
                    </div>

                    <div class="card card-memory">
                        <div class="card-header">
                            <span class="card-icon">üß†</span>
                            <span class="card-title">Memoria</span>
                        </div>
                        <div class="card-body">
                            <div class="memory-stats">
                                <div class="memory-bar">
                                    <div class="memory-fill" id="memoryFill" style="width: 0%"></div>
                                </div>
                                <div class="memory-info">
                                    <span id="memoryUsed">0 MB</span>
                                    <span id="memoryTotal">/ 100 MB</span>
                                </div>
                            </div>
                            <div class="memory-contexts">
                                <span class="contexts-count" id="contextsCount">0 contextos activos</span>
                            </div>
                        </div>
                    </div>

                    <div class="card card-status">
                        <div class="card-header">
                            <span class="card-icon">üéØ</span>
                            <span class="card-title">Estado Autocapeo</span>
                        </div>
                        <div class="card-body">
                            <div class="autocap-status" id="autocapStatus">
                                <span class="status-badge active">Activo</span>
                                <span class="autocap-mode">Modo: Balanceado</span>
                            </div>
                            <div class="autocap-limits">
                                <div class="limit-item">
                                    <span class="limit-label">L√≠mite Quota:</span>
                                    <span class="limit-value" id="quotaLimit">80%</span>
                                </div>
                                <div class="limit-item">
                                    <span class="limit-label">L√≠mite Memoria:</span>
                                    <span class="limit-value" id="memoryLimit">90%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="section">
                    <h2 class="section-title">Acciones R√°pidas</h2>
                    <div class="quick-actions">
                        <button class="action-btn" id="btnClearMemory">
                            <span class="action-icon">üßπ</span>
                            <span class="action-text">Limpiar Memoria</span>
                        </button>
                        <button class="action-btn" id="btnExportContext">
                            <span class="action-icon">üíæ</span>
                            <span class="action-text">Exportar Contexto</span>
                        </button>
                        <button class="action-btn" id="btnOptimize">
                            <span class="action-icon">‚ö°</span>
                            <span class="action-text">Optimizar Uso</span>
                        </button>
                        <button class="action-btn" id="btnPause">
                            <span class="action-icon">‚è∏Ô∏è</span>
                            <span class="action-text">Pausar Procesos</span>
                        </button>
                    </div>
                </div>

                <!-- Usage Chart -->
                <div class="section">
                    <h2 class="section-title">Uso Hist√≥rico</h2>
                    <div class="chart-container">
                        <canvas id="usageChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Memory Tab -->
            <div class="tab-content" id="memory-tab">
                <div class="memory-controls">
                    <div class="search-box">
                        <input type="text" id="memorySearch" placeholder="üîç Buscar contexto...">
                    </div>
                    <div class="memory-filters">
                        <button class="filter-btn active" data-filter="all">Todos</button>
                        <button class="filter-btn" data-filter="active">Activos</button>
                        <button class="filter-btn" data-filter="archived">Archivados</button>
                    </div>
                </div>
                
                <div class="contexts-list" id="contextsList">
                    <!-- Contexts loaded dynamically -->
                </div>

                <div class="memory-actions-bar">
                    <button class="btn btn-secondary" id="btnArchiveAll">üì¶ Archivar Todos</button>
                    <button class="btn btn-danger" id="btnClearAll">üóëÔ∏è Limpiar Todo</button>
                </div>
            </div>

            <!-- Quota Tab -->
            <div class="tab-content" id="quota-tab">
                <div class="quota-detailed">
                    <div class="quota-chart-container">
                        <h3>Uso por Modelo</h3>
                        <div class="model-usage-list" id="modelUsageList">
                            <!-- Model usage loaded dynamically -->
                        </div>
                    </div>
                    <div class="quota-alerts">
                        <h3>Alertas Configuradas</h3>
                        <div class="alerts-list" id="alertsList">
                            <!-- Alerts loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Autocap Tab -->
            <div class="tab-content" id="autocap-tab">
                <div class="autocap-config">
                    <div class="config-section">
                        <h3>üéØ Modo de Autocapeo</h3>
                        <div class="mode-selector">
                            <label class="mode-option">
                                <input type="radio" name="autocapMode" value="conservative" checked>
                                <span class="mode-card">
                                    <span class="mode-icon">üõ°Ô∏è</span>
                                    <span class="mode-name">Conservador</span>
                                    <span class="mode-desc">L√≠mites bajos, m√°xima seguridad</span>
                                </span>
                            </label>
                            <label class="mode-option">
                                <input type="radio" name="autocapMode" value="balanced">
                                <span class="mode-card">
                                    <span class="mode-icon">‚öñÔ∏è</span>
                                    <span class="mode-name">Balanceado</span>
                                    <span class="mode-desc">Equilibrio rendimiento/seguridad</span>
                                </span>
                            </label>
                            <label class="mode-option">
                                <input type="radio" name="autocapMode" value="performance">
                                <span class="mode-card">
                                    <span class="mode-icon">üöÄ</span>
                                    <span class="mode-name">Rendimiento</span>
                                    <span class="mode-desc">M√°ximo uso, l√≠mites altos</span>
                                </span>
                            </label>
                        </div>
                    </div>

                    <div class="config-section">
                        <h3>üìä L√≠mites Personalizados</h3>
                        <div class="limit-sliders">
                            <div class="slider-group">
                                <label>L√≠mite de Quota</label>
                                <input type="range" id="quotaSlider" min="50" max="100" value="80">
                                <span class="slider-value" id="quotaSliderValue">80%</span>
                            </div>
                            <div class="slider-group">
                                <label>L√≠mite de Memoria</label>
                                <input type="range" id="memorySlider" min="50" max="100" value="90">
                                <span class="slider-value" id="memorySliderValue">90%</span>
                            </div>
                        </div>
                    </div>

                    <div class="config-section">
                        <h3>üîî Acciones Autom√°ticas</h3>
                        <div class="actions-toggle">
                            <label class="toggle-item">
                                <input type="checkbox" id="autoClearMemory" checked>
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">Auto-limpiar memoria al llegar al l√≠mite</span>
                            </label>
                            <label class="toggle-item">
                                <input type="checkbox" id="autoSwitchModel" checked>
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">Auto-cambiar a modelo m√°s barato</span>
                            </label>
                            <label class="toggle-item">
                                <input type="checkbox" id="autoNotify" checked>
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">Notificar cuando se active autocapeo</span>
                            </label>
                        </div>
                    </div>

                    <div class="config-actions">
                        <button class="btn btn-primary" id="saveAutocap">üíæ Guardar Configuraci√≥n</button>
                        <button class="btn btn-secondary" id="resetAutocap">‚Ü©Ô∏è Restaurar Defaults</button>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div class="tab-content" id="settings-tab">
                <div class="settings-form">
                    <div class="form-group">
                        <label>API Key de Antigravity</label>
                        <input type="password" id="apiKey" placeholder="sk-...">
                    </div>
                    <div class="form-group">
                        <label>Refresh Interval (segundos)</label>
                        <input type="number" id="refreshInterval" value="30" min="5" max="300">
                    </div>
                    <div class="form-group">
                        <label>Tema</label>
                        <select id="theme">
                            <option value="dark">Oscuro</option>
                            <option value="light">Claro</option>
                            <option value="auto">Auto</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" id="saveSettings">üíæ Guardar</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="/static/toolkit.js"></script>
</body>
</html>
