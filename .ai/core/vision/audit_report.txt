======================================================================
  COGNITIVE VISUAL CORTEX V2.0 - DEEP INCONSISTENCY AUDIT
======================================================================

[1] PROJECT HEALTH OVERVIEW
    Health Score: 79.1/100
    Node Counts: {"class": 153, "file": 154, "function": 756}
    Smell Counts: {"critical": 9, "info": 30, "warning": 27}

[2] TOP 10 RISKY NODES
    [ 80.0] Lead                           (class) | CC=34, Cog=19
    [ 80.0] ContentManager                 (class) | CC=43, Cog=45
    [ 79.0] retry                          (function) | CC=11, Cog=12
    [ 79.0] CircuitBreaker                 (class) | CC=19, Cog=24
    [ 79.0] TestZarazActions               (class) | CC=20, Cog=32
    [ 78.0] CreateLeadHandler              (class) | CC=16, Cog=16
    [ 78.0] TrackEventHandler              (class) | CC=16, Cog=18
    [ 77.0] handle                         (function) | CC=14, Cog=16
    [ 77.0] __call__                       (function) | CC=13, Cog=20
    [ 77.0] validate_phone                 (function) | CC=14, Cog=19

[3] CODE SMELLS DETECTED: 66

    [CRITICAL] (9 smells)
      * high_complexity           -> tests/05_senior_audit/test_live_infrastructure.py::test_cloudflare_access_integrity
        
      * high_complexity           -> tests/03_audit/test_infrastructure.py::test_redis_connection
        
      * high_complexity           -> tests/03_audit/test_infrastructure.py::test_database_connection
        
      * high_complexity           -> tests/03_audit/test_infrastructure.py::test_environment_variables
        
      * high_complexity           -> scripts/test_all_credentials.py::test_credential
        
      * high_complexity           -> app/interfaces/api/routes/tracking.py::_get_tracking_context
        
      * high_complexity           -> app/interfaces/api/middleware/error_handler.py::ErrorHandlerMiddleware::_debug_allowed
        
      * high_complexity           -> git_sync.py::main
        

    [WARNING] (27 smells)
      * long_method               -> tests/05_senior_audit/test_live_infrastructure.py::test_cloudflare_access_integrity
        
      * long_method               -> tests/05_senior_audit/test_live_infrastructure.py::test_supabase_security_audit
        
      * deep_nesting              -> tests/03_audit/test_zaraz.py::TestZarazActions::test_pageview_fires_on_pageview_trigger
        
      * deep_nesting              -> tests/03_audit/test_zaraz.py::TestZarazActions::test_pageview_action_enabled
        
      * deep_nesting              -> tests/03_audit/test_infrastructure.py::test_environment_variables
        
      * long_method               -> tests/02_integration/test_traceability.py::test_capi_traceability_chain
        
      * deep_nesting              -> tests/00_architecture/test_no_legacy_paths.py::_legacy_import_violations
        
      * deep_nesting              -> scripts/list_permissions.py::list_permission_groups
        

    [INFO] (30 smells)
      * many_parameters           -> tests/unit/test_track_event_handler.py::test_send_to_trackers_tracker_failure
        
      * many_parameters           -> tests/unit/test_track_event_handler.py::test_handle_existing_visitor_updated_and_event_saved
        
      * many_parameters           -> tests/unit/test_track_event_handler.py::test_handle_new_visitor_and_event_saved
        
      * many_parameters           -> refactor_backup/app_tracking.py::track_scroll_depth
        
      * many_parameters           -> refactor_backup/app_tracking.py::track_initiate_contact
        
      * many_parameters           -> refactor_backup/app_tracking.py::track_view_content
        
      * many_parameters           -> refactor_backup/app_tracking.py::track_lead
        
      * many_parameters           -> refactor_backup/app_tracking.py::send_event_async
        

[4] CIRCULAR DEPENDENCY CHECK
    No circular dependencies found OK

[5] GHOST REFERENCES (broken imports)
    All imports resolve OK

[6] DUPLICATE FUNCTION NAMES (potential shadowing)
    1 functions defined in multiple locations:
    * :
        - git_sync.py::Console::_print
        - git_sync.py::Console::log
        - git_sync.py::Console::success
        - git_sync.py::Console::error
        - git_sync.py::Console::info
        - git_sync.py::Console::warning
        - git_sync.py::SystemAuditor::__init__
        - git_sync.py::SystemAuditor::check_environment
        - git_sync.py::SystemAuditor::run_phase
        - git_sync.py::SystemAuditor::_add_issue
        - git_sync.py::SystemAuditor::_extract_issues
        - git_sync.py::SystemAuditor::_classify_error_type
        - git_sync.py::SystemAuditor::analyze_suggestions
        - git_sync.py::SystemAuditor::report
        - git_sync.py::SystemAuditor::_shorten_path
        - git_sync.py::purge_cloudflare_cache
        - git_sync.py::run_cmd
        - git_sync.py::main
        - main.py::init_sentry
        - main.py::lifespan
        - main_new.py::lifespan
        - main_new.py::health
        - test_nexus7.py::test_imports
        - test_nexus7.py::test_registry
        - test_nexus7.py::test_state_engine
        - test_nexus7.py::test_task_lifecycle
        - test_nexus7.py::test_auditor
        - test_nexus7.py::test_cli
        - test_nexus7.py::main
        - app/cache.py::LegacyRedisCache::__init__
        - app/cache.py::LegacyRedisCache::_redis
        - app/cache.py::LegacyRedisCache::get_json
        - app/cache.py::LegacyRedisCache::set_json
        - app/cache.py::LegacyRedisCache::delete
        - app/cache.py::deduplicate_event
        - app/cache.py::cache_visitor_data
        - app/cache.py::get_cached_visitor
        - app/cache.py::redis_health_check
        - app/config.py::_resolve_templates_dirs
        - app/config.py::_resolve_static_dir
        - app/config.py::Settings::redis_enabled
        - app/config.py::Settings::rudderstack_enabled
        - app/config.py::Settings::validate_critical
        - app/config.py::Settings::meta_api_url
        - app/config.py::Settings::whatsapp_url
        - app/database.py::get_db_connection
        - app/database.py::_establish_connection
        - app/database.py::_handle_db_error
        - app/database.py::_close_connection
        - app/database.py::SQLiteCursorWrapper::__init__
        - app/database.py::SQLiteCursorWrapper::execute
        - app/database.py::SQLiteCursorWrapper::fetchone
        - app/database.py::SQLiteCursorWrapper::fetchall
        - app/database.py::SQLiteCursorWrapper::close
        - app/database.py::SQLiteCursorWrapper::rowcount
        - app/database.py::SQLiteCursorWrapper::lastrowid
        - app/database.py::get_cursor
        - app/database.py::init_tables
        - app/database.py::_get_db_config
        - app/database.py::_create_core_tables
        - app/database.py::_create_crm_tables
        - app/database.py::_run_column_migrations
        - app/database.py::save_visitor
        - app/database.py::get_visitor_fbclid
        - app/database.py::upsert_contact_advanced
        - app/database.py::save_message
        - app/database.py::get_chat_history
        - app/database.py::check_connection
        - app/database.py::mark_lead_sent
        - app/database.py::get_user_message_count
        - app/database.py::check_if_lead_sent
        - app/database.py::get_or_create_lead
        - app/database.py::log_interaction
        - app/database.py::get_all_visitors
        - app/database.py::get_visitor_by_id
        - app/diagnostics.py::check_environment
        - app/diagnostics.py::check_database
        - app/diagnostics.py::check_redis
        - app/diagnostics.py::run_full_diagnostics
        - app/diagnostics.py::log_startup_report
        - app/maintenance.py::verify_cron_secret
        - app/maintenance.py::clean_garbage_data
        - app/meta_capi.py::_normalize_email
        - app/meta_capi.py::_normalize_phone
        - app/meta_capi.py::_normalize_city
        - app/meta_capi.py::EnhancedUserData::_set_contact_info
        - app/meta_capi.py::EnhancedUserData::to_sdk_user_data
        - app/meta_capi.py::EnhancedCustomData::to_dict
        - app/meta_capi.py::EliteMetaCAPIService::__init__
        - app/meta_capi.py::EliteMetaCAPIService::_deduplicate
        - app/meta_capi.py::EliteMetaCAPIService::send_event
        - app/meta_capi.py::send_elite_event
        - app/retry_queue.py::add_to_retry_queue
        - app/retry_queue.py::_process_single_item
        - app/retry_queue.py::process_retry_queue
        - app/rudderstack.py::RudderStackService::__init__
        - app/rudderstack.py::RudderStackService::identify
        - app/rudderstack.py::RudderStackService::track
        - app/tracking.py::hash_data
        - app/tracking.py::generate_external_id
        - app/tracking.py::generate_fbc
        - app/tracking.py::generate_fbp
        - app/tracking.py::generate_event_id
        - app/tracking.py::extract_fbclid_from_fbc
        - app/tracking.py::get_prioritized_fbclid
        - app/tracking.py::_build_payload
        - app/tracking.py::send_event
        - app/tracking.py::send_event_async
        - app/tracking.py::send_n8n_webhook
        - app/tracking.py::track_lead
        - app/tracking.py::track_view_content
        - app/tracking.py::track_initiate_contact
        - app/tracking.py::track_scroll_depth
        - app/application/commands/create_lead.py::CreateLeadHandler::__init__
        - app/application/commands/create_lead.py::CreateLeadHandler::handle
        - app/application/commands/create_lead.py::CreateLeadHandler::_to_response
        - app/application/commands/create_visitor.py::CreateVisitorHandler::__init__
        - app/application/commands/create_visitor.py::CreateVisitorHandler::handle
        - app/application/commands/create_visitor.py::CreateVisitorHandler::_to_response
        - app/application/commands/track_event.py::TrackEventHandler::__init__
        - app/application/commands/track_event.py::TrackEventHandler::handle
        - app/application/commands/track_event.py::TrackEventHandler::_send_to_trackers
        - app/application/commands/admin/confirm_sale_command.py::ConfirmSaleCommand::execute
        - app/application/commands/identity/process_google_onetap_command.py::ProcessGoogleOneTapHandler::__init__
        - app/application/commands/identity/process_google_onetap_command.py::ProcessGoogleOneTapHandler::handle
        - app/application/commands/identity/track_whatsapp_redirect_command.py::TrackWhatsAppRedirectHandler::__init__
        - app/application/commands/identity/track_whatsapp_redirect_command.py::TrackWhatsAppRedirectHandler::handle
        - app/application/dto/lead_dto.py::CreateLeadRequest::sanitize_phone
        - app/application/dto/lead_dto.py::CreateLeadRequest::sanitize_name
        - app/application/dto/tracking_dto.py::TrackingContext::validate_ip
        - app/application/dto/tracking_dto.py::TrackingContext::validate_ua
        - app/application/dto/tracking_dto.py::TrackEventRequest::validate_event_name
        - app/application/dto/tracking_dto.py::TrackEventRequest::validate_url
        - app/application/dto/tracking_dto.py::TrackEventRequest::validate_fbclid
        - app/application/dto/tracking_dto.py::TrackEventResponse::ok
        - app/application/dto/tracking_dto.py::TrackEventResponse::duplicate
        - app/application/dto/tracking_dto.py::TrackEventResponse::error
        - app/application/interfaces/cache_port.py::DeduplicationPort::is_unique
        - app/application/interfaces/cache_port.py::DeduplicationPort::mark_processed
        - app/application/interfaces/cache_port.py::ContentCachePort::get
        - app/application/interfaces/cache_port.py::ContentCachePort::set
        - app/application/interfaces/cache_port.py::ContentCachePort::delete
        - app/application/interfaces/cache_port.py::ContentCachePort::clear
        - app/application/interfaces/tracker_port.py::TrackerPort::name
        - app/application/interfaces/tracker_port.py::TrackerPort::track
        - app/application/interfaces/tracker_port.py::TrackerPort::health_check
        - app/application/queries/get_content.py::GetContentHandler::__init__
        - app/application/queries/get_content.py::GetContentHandler::handle
        - app/application/queries/get_content.py::GetContentHandler::_refresh_cache
        - app/application/queries/get_content.py::GetContentHandler::_fetch_from_db
        - app/application/queries/get_visitor.py::GetVisitorHandler::__init__
        - app/application/queries/get_visitor.py::GetVisitorHandler::handle
        - app/application/queries/list_visitors.py::ListVisitorsHandler::__init__
        - app/application/queries/list_visitors.py::ListVisitorsHandler::handle
        - app/application/queries/admin/get_all_visitors_query.py::GetAllVisitorsQuery::execute
        - app/application/queries/admin/get_signal_audit_query.py::GetSignalAuditQuery::execute
        - app/application/queries/seo/get_page_seo_data_query.py::GetPageSEODataQuery::execute
        - app/core/decorators.py::timed
        - app/core/decorators.py::RetryConfig::__init__
        - app/core/decorators.py::retry
        - app/core/decorators.py::CircuitBreaker::__init__
        - app/core/decorators.py::CircuitBreaker::_get_stats
        - app/core/decorators.py::CircuitBreaker::_update_state
        - app/core/decorators.py::CircuitBreaker::__call__
        - app/core/decorators.py::circuit_breaker
        - app/core/decorators.py::memoize
        - app/core/result.py::Ok::__repr__
        - app/core/result.py::Ok::__bool__
        - app/core/result.py::Err::__repr__
        - app/core/result.py::Err::__bool__
        - app/core/result.py::Result::__init__
        - app/core/result.py::Result::ok
        - app/core/result.py::Result::err
        - app/core/result.py::Result::is_ok
        - app/core/result.py::Result::is_err
        - app/core/result.py::Result::unwrap
        - app/core/result.py::Result::unwrap_err
        - app/core/result.py::Result::unwrap_or
        - app/core/result.py::Result::unwrap_or_else
        - app/core/result.py::Result::expect
        - app/core/result.py::Result::map
        - app/core/result.py::Result::map_err
        - app/core/result.py::Result::and_then
        - app/core/result.py::Result::or_else
        - app/core/result.py::Result::match
        - app/core/result.py::Result::__repr__
        - app/core/result.py::Result::__bool__
        - app/core/result.py::Result::__eq__
        - app/core/result.py::Result::__hash__
        - app/core/result.py::as_result
        - app/core/result.py::as_result_async
        - app/core/validators.py::validate_phone
        - app/core/validators.py::validate_email
        - app/core/validators.py::normalize_email
        - app/core/validators.py::hash_sha256
        - app/core/validators.py::hash_email
        - app/core/validators.py::hash_phone
        - app/core/validators.py::validate_external_id
        - app/core/validators.py::generate_external_id
        - app/core/validators.py::validate_url
        - app/core/validators.py::validate_event_id
        - app/core/validators.py::sanitize_string
        - app/core/validators.py::sanitize_utm
        - app/domain/exceptions.py::VisitorNotFoundError::__init__
        - app/domain/exceptions.py::LeadNotFoundError::__init__
        - app/domain/exceptions.py::DuplicateLeadError::__init__
        - app/domain/exceptions.py::ValidationError::__init__
        - app/domain/exceptions.py::InvalidPhoneError::__init__
        - app/domain/exceptions.py::InvalidEmailError::__init__
        - app/domain/models/events.py::TrackingEvent::create
        - app/domain/models/events.py::TrackingEvent::reconstruct
        - app/domain/models/events.py::TrackingEvent::with_custom_data
        - app/domain/models/events.py::TrackingEvent::to_meta_payload
        - app/domain/models/events.py::TrackingEvent::is_duplicate_of
        - app/domain/models/events.py::TrackingEvent::is_conversion_event
        - app/domain/models/events.py::TrackingEvent::__repr__
        - app/domain/models/lead.py::Lead::create
        - app/domain/models/lead.py::Lead::update_status
        - app/domain/models/lead.py::Lead::update_contact_info
        - app/domain/models/lead.py::Lead::qualify
        - app/domain/models/lead.py::Lead::mark_as_sent_to_meta
        - app/domain/models/lead.py::Lead::is_qualified
        - app/domain/models/lead.py::Lead::is_hot
        - app/domain/models/lead.py::Lead::to_meta_custom_data
        - app/domain/models/lead.py::Lead::__repr__
        - app/domain/models/lead.py::Lead::__eq__
        - app/domain/models/lead.py::Lead::__hash__
        - app/domain/models/values.py::EventId::__post_init__
        - app/domain/models/values.py::EventId::generate
        - app/domain/models/values.py::EventId::from_string
        - app/domain/models/values.py::EventId::__str__
        - app/domain/models/values.py::EventId::__repr__
        - app/domain/models/values.py::ExternalId::__post_init__
        - app/domain/models/values.py::ExternalId::from_request
        - app/domain/models/values.py::ExternalId::from_string
        - app/domain/models/values.py::ExternalId::__str__
        - app/domain/models/values.py::ExternalId::__repr__
        - app/domain/models/values.py::Phone::__post_init__
        - app/domain/models/values.py::Phone::parse
        - app/domain/models/values.py::Phone::hash
        - app/domain/models/values.py::Phone::local_format
        - app/domain/models/values.py::Phone::__str__
        - app/domain/models/values.py::Phone::__repr__
        - app/domain/models/values.py::Email::__post_init__
        - app/domain/models/values.py::Email::parse
        - app/domain/models/values.py::Email::hash
        - app/domain/models/values.py::Email::domain
        - app/domain/models/values.py::Email::__str__
        - app/domain/models/values.py::Email::__repr__
        - app/domain/models/values.py::GeoLocation::to_meta_format
        - app/domain/models/values.py::UTMParams::from_dict
        - app/domain/models/values.py::UTMParams::to_dict
        - app/domain/models/values.py::UTMParams::is_empty
        - app/domain/models/visitor.py::Visitor::create
        - app/domain/models/visitor.py::Visitor::reconstruct
        - app/domain/models/visitor.py::Visitor::record_visit
        - app/domain/models/visitor.py::Visitor::update_fbclid
        - app/domain/models/visitor.py::Visitor::update_fbp
        - app/domain/models/visitor.py::Visitor::to_meta_user_data
        - app/domain/models/visitor.py::Visitor::is_tracked
        - app/domain/models/visitor.py::Visitor::days_since_last_visit
        - app/domain/models/visitor.py::Visitor::__repr__
        - app/domain/models/visitor.py::Visitor::__eq__
        - app/domain/models/visitor.py::Visitor::__hash__
        - app/domain/repositories/event_repo.py::EventRepository::save
        - app/domain/repositories/event_repo.py::EventRepository::get_by_id
        - app/domain/repositories/event_repo.py::EventRepository::list_by_visitor
        - app/domain/repositories/event_repo.py::EventRepository::list_by_visitor_and_type
        - app/domain/repositories/event_repo.py::EventRepository::list_by_date_range
        - app/domain/repositories/event_repo.py::EventRepository::exists
        - app/domain/repositories/event_repo.py::EventRepository::count_by_visitor
        - app/domain/repositories/event_repo.py::EventRepository::count_by_type_and_date
        - app/domain/repositories/lead_repo.py::LeadRepository::get_by_id
        - app/domain/repositories/lead_repo.py::LeadRepository::get_by_phone
        - app/domain/repositories/lead_repo.py::LeadRepository::get_by_external_id
        - app/domain/repositories/lead_repo.py::LeadRepository::save
        - app/domain/repositories/lead_repo.py::LeadRepository::create
        - app/domain/repositories/lead_repo.py::LeadRepository::update
        - app/domain/repositories/lead_repo.py::LeadRepository::list_by_status
        - app/domain/repositories/lead_repo.py::LeadRepository::list_hot_leads
        - app/domain/repositories/lead_repo.py::LeadRepository::list_recent
        - app/domain/repositories/lead_repo.py::LeadRepository::count_by_status
        - app/domain/repositories/lead_repo.py::LeadRepository::phone_exists
        - app/domain/repositories/visitor_repo.py::VisitorRepository::get_by_external_id
        - app/domain/repositories/visitor_repo.py::VisitorRepository::get_by_fbclid
        - app/domain/repositories/visitor_repo.py::VisitorRepository::save
        - app/domain/repositories/visitor_repo.py::VisitorRepository::create
        - app/domain/repositories/visitor_repo.py::VisitorRepository::update
        - app/domain/repositories/visitor_repo.py::VisitorRepository::list_recent
        - app/domain/repositories/visitor_repo.py::VisitorRepository::count
        - app/domain/repositories/visitor_repo.py::VisitorRepository::exists
        - app/infrastructure/cache/memory_cache.py::InMemoryDeduplication::__init__
        - app/infrastructure/cache/memory_cache.py::InMemoryDeduplication::is_unique
        - app/infrastructure/cache/memory_cache.py::InMemoryDeduplication::mark_processed
        - app/infrastructure/cache/memory_cache.py::InMemoryDeduplication::_cleanup_expired
        - app/infrastructure/cache/memory_cache.py::InMemoryContentCache::__init__
        - app/infrastructure/cache/memory_cache.py::InMemoryContentCache::get
        - app/infrastructure/cache/memory_cache.py::InMemoryContentCache::set
        - app/infrastructure/cache/memory_cache.py::InMemoryContentCache::delete
        - app/infrastructure/cache/memory_cache.py::InMemoryContentCache::clear
        - app/infrastructure/cache/redis_cache.py::RedisDeduplication::__init__
        - app/infrastructure/cache/redis_cache.py::RedisDeduplication::_redis
        - app/infrastructure/cache/redis_cache.py::RedisDeduplication::is_unique
        - app/infrastructure/cache/redis_cache.py::RedisDeduplication::mark_processed
        - app/infrastructure/cache/redis_cache.py::RedisContentCache::__init__
        - app/infrastructure/cache/redis_cache.py::RedisContentCache::_redis
        - app/infrastructure/cache/redis_cache.py::RedisContentCache::get
        - app/infrastructure/cache/redis_cache.py::RedisContentCache::set
        - app/infrastructure/cache/redis_cache.py::RedisContentCache::delete
        - app/infrastructure/cache/redis_cache.py::RedisContentCache::clear
        - app/infrastructure/config/settings.py::DatabaseSettings::is_configured
        - app/infrastructure/config/settings.py::DatabaseSettings::is_serverless
        - app/infrastructure/config/settings.py::DatabaseSettings::validate_serverless_port
        - app/infrastructure/config/settings.py::RedisSettings::is_configured
        - app/infrastructure/config/settings.py::MetaSettings::is_configured
        - app/infrastructure/config/settings.py::MetaSettings::api_url
        - app/infrastructure/config/settings.py::SecuritySettings::parse_cors_origins
        - app/infrastructure/config/settings.py::ObservabilitySettings::sentry_enabled
        - app/infrastructure/config/settings.py::ServerSettings::is_production
        - app/infrastructure/config/settings.py::Settings::whatsapp_url
        - app/infrastructure/config/settings.py::Settings::validate_critical
        - app/infrastructure/config/settings.py::Settings::log_status
        - app/infrastructure/config/settings.py::get_settings
        - app/infrastructure/external/meta_capi/tracker.py::MetaTracker::__init__
        - app/infrastructure/external/meta_capi/tracker.py::MetaTracker::name
        - app/infrastructure/external/meta_capi/tracker.py::MetaTracker::_http_client
        - app/infrastructure/external/meta_capi/tracker.py::MetaTracker::track
        - app/infrastructure/external/meta_capi/tracker.py::MetaTracker::_build_payload
        - app/infrastructure/external/meta_capi/tracker.py::MetaTracker::health_check
        - app/infrastructure/external/rudderstack/tracker.py::RudderStackTracker::__init__
        - app/infrastructure/external/rudderstack/tracker.py::RudderStackTracker::name
        - app/infrastructure/external/rudderstack/tracker.py::RudderStackTracker::_get_client
        - app/infrastructure/external/rudderstack/tracker.py::RudderStackTracker::track
        - app/infrastructure/external/rudderstack/tracker.py::RudderStackTracker::health_check
        - app/infrastructure/persistence/database.py::Database::__init__
        - app/infrastructure/persistence/database.py::Database::_detect_backend
        - app/infrastructure/persistence/database.py::Database::backend
        - app/infrastructure/persistence/database.py::Database::connection
        - app/infrastructure/persistence/database.py::Database::_postgres_connection
        - app/infrastructure/persistence/database.py::Database::_sqlite_connection
        - app/infrastructure/persistence/event_repo.py::PostgreSQLEventRepository::__init__
        - app/infrastructure/persistence/event_repo.py::PostgreSQLEventRepository::_row_to_entity
        - app/infrastructure/persistence/event_repo.py::PostgreSQLEventRepository::save
        - app/infrastructure/persistence/event_repo.py::PostgreSQLEventRepository::get_by_id
        - app/infrastructure/persistence/event_repo.py::PostgreSQLEventRepository::list_by_visitor
        - app/infrastructure/persistence/event_repo.py::PostgreSQLEventRepository::list_by_visitor_and_type
        - app/infrastructure/persistence/event_repo.py::PostgreSQLEventRepository::list_by_date_range
        - app/infrastructure/persistence/event_repo.py::PostgreSQLEventRepository::exists
        - app/infrastructure/persistence/event_repo.py::PostgreSQLEventRepository::count_by_visitor
        - app/infrastructure/persistence/event_repo.py::PostgreSQLEventRepository::count_by_type_and_date
        - app/infrastructure/persistence/visitor_repo.py::PostgreSQLVisitorRepository::__init__
        - app/infrastructure/persistence/visitor_repo.py::PostgreSQLVisitorRepository::_row_to_entity
        - app/infrastructure/persistence/visitor_repo.py::PostgreSQLVisitorRepository::get_by_external_id
        - app/infrastructure/persistence/visitor_repo.py::PostgreSQLVisitorRepository::get_by_fbclid
        - app/infrastructure/persistence/visitor_repo.py::PostgreSQLVisitorRepository::save
        - app/infrastructure/persistence/visitor_repo.py::PostgreSQLVisitorRepository::create
        - app/infrastructure/persistence/visitor_repo.py::PostgreSQLVisitorRepository::update
        - app/infrastructure/persistence/visitor_repo.py::PostgreSQLVisitorRepository::list_recent
        - app/infrastructure/persistence/visitor_repo.py::PostgreSQLVisitorRepository::count
        - app/infrastructure/persistence/visitor_repo.py::PostgreSQLVisitorRepository::exists
        - app/interfaces/api/dependencies.py::get_deduplicator
        - app/interfaces/api/dependencies.py::get_content_cache
        - app/interfaces/api/dependencies.py::get_visitor_repository
        - app/interfaces/api/dependencies.py::get_event_repository
        - app/interfaces/api/dependencies.py::get_lead_repository
        - app/interfaces/api/dependencies.py::get_trackers
        - app/interfaces/api/dependencies.py::get_track_event_handler
        - app/interfaces/api/dependencies.py::get_create_visitor_handler
        - app/interfaces/api/dependencies.py::get_get_content_handler
        - app/interfaces/api/middleware/error_handler.py::ErrorHandlerMiddleware::__init__
        - app/interfaces/api/middleware/error_handler.py::ErrorHandlerMiddleware::__call__
        - app/interfaces/api/middleware/error_handler.py::ErrorHandlerMiddleware::_debug_allowed
        - app/interfaces/api/middleware/error_handler.py::ErrorHandlerMiddleware::_render_error
        - app/interfaces/api/middleware/error_handler.py::setup_error_handlers
        - app/interfaces/api/routes/admin.py::verify_admin_key
        - app/interfaces/api/routes/admin.py::admin_dashboard
        - app/interfaces/api/routes/admin.py::admin_stats
        - app/interfaces/api/routes/admin.py::confirm_sale
        - app/interfaces/api/routes/admin.py::audit_signals
        - app/interfaces/api/routes/health.py::head_health_check
        - app/interfaces/api/routes/health.py::health_check
        - app/interfaces/api/routes/health.py::health_diagnostics_full
        - app/interfaces/api/routes/health.py::ping
        - app/interfaces/api/routes/health.py::_prewarm_probe_payload
        - app/interfaces/api/routes/health.py::prewarm_debug
        - app/interfaces/api/routes/health.py::prewarm_health
        - app/interfaces/api/routes/identity.py::_decode_google_jwt
        - app/interfaces/api/routes/identity.py::receive_google_credential
        - app/interfaces/api/routes/identity.py::whatsapp_redirect
        - app/interfaces/api/routes/pages.py::bg_save_visitor
        - app/interfaces/api/routes/pages.py::bg_send_pageview
        - app/interfaces/api/routes/pages.py::head_root
        - app/interfaces/api/routes/pages.py::read_root
        - app/interfaces/api/routes/pages.py::_extract_identity_info
        - app/interfaces/api/routes/pages.py::_handle_ab_test
        - app/interfaces/api/routes/pages.py::_get_hero_content
        - app/interfaces/api/routes/pages.py::_resolve_fbclid_full
        - app/interfaces/api/routes/pages.py::_schedule_tracking
        - app/interfaces/api/routes/pages.py::_set_identity_cookies
        - app/interfaces/api/routes/pages.py::_get_feature_flags
        - app/interfaces/api/routes/seo.py::sitemap_xml
        - app/interfaces/api/routes/seo.py::robots_txt
        - app/interfaces/api/routes/seo.py::get_seo_metadata
        - app/interfaces/api/routes/tracking.py::bg_save_visitor
        - app/interfaces/api/routes/tracking.py::bg_send_meta_event
        - app/interfaces/api/routes/tracking.py::bg_upsert_contact
        - app/interfaces/api/routes/tracking.py::bg_send_webhook
        - app/interfaces/api/routes/tracking.py::bg_send_rudderstack_event
        - app/interfaces/api/routes/tracking.py::track_event
        - app/interfaces/api/routes/tracking.py::_get_tracking_context
        - app/interfaces/api/routes/tracking.py::_validate_human
        - app/interfaces/api/routes/tracking.py::_queue_lead_sync
        - app/interfaces/api/routes/tracking.py::_dispatch_to_capi
        - app/interfaces/api/routes/tracking.py::_queue_external_hubs
        - app/interfaces/api/routes/tracking.py::track_lead_context
        - app/interfaces/api/routes/tracking.py::track_interaction
        - app/interfaces/api/routes/tracking.py::process_qstash_event
        - app/interfaces/api/routes/tracking.py::tracking_health
        - app/middleware/early_hints.py::EarlyHintsMiddleware::dispatch
        - app/middleware/identity.py::ServerSideIdentityMiddleware::__init__
        - app/middleware/identity.py::ServerSideIdentityMiddleware::dispatch
        - app/middleware/security.py::SecurityHeadersMiddleware::__init__
        - app/middleware/security.py::SecurityHeadersMiddleware::dispatch
        - app/routes/health.py::head_health_check
        - app/routes/health.py::health_check
        - app/routes/health.py::health_diagnostics_full
        - app/routes/health.py::ping
        - app/routes/pages.py::bg_save_visitor
        - app/routes/pages.py::bg_send_pageview
        - app/routes/pages.py::head_root
        - app/routes/pages.py::read_root
        - app/routes/pages.py::_extract_identity_info
        - app/routes/pages.py::_handle_ab_test
        - app/routes/pages.py::_get_hero_content
        - app/routes/pages.py::_resolve_fbclid_full
        - app/routes/pages.py::_schedule_tracking
        - app/routes/pages.py::_set_identity_cookies
        - app/routes/pages.py::_get_feature_flags
        - app/routes/seo.py::robots_txt
        - app/routes/seo.py::sitemap_index
        - app/routes/seo.py::sitemap_pages
        - app/routes/seo.py::sitemap_services
        - app/services/seo_engine.py::SEOEngine::get_global_schema
        - app/services/seo_engine.py::SEOEngine::get_service_schema
        - app/services/seo_engine.py::SEOEngine::get_breadcrumb_schema
        - app/services/seo_engine.py::SEOEngine::generate_all_json_ld
        - app/services/seo_engine.py::SEOEngine::get_page_metadata
        - app/services/__init__.py::ContentManager::get_content
        - app/services/__init__.py::ContentManager::_refresh_in_background
        - app/services/__init__.py::ContentManager::_deep_validate
        - app/services/__init__.py::ContentManager::_validate_services_list
        - app/services/__init__.py::ContentManager::_fetch_from_db
        - app/services/__init__.py::ContentManager::warm_cache
        - app/services/__init__.py::ContentManager::refresh_all
        - app/services/__init__.py::get_services_config
        - app/services/__init__.py::get_contact_config
        - app/services/__init__.py::publish_to_qstash
        - app/services/__init__.py::validate_turnstile
        - app/services/__init__.py::normalize_pii
        - migrations/env.py::get_db_url
        - migrations/env.py::run_migrations_offline
        - migrations/env.py::run_migrations_online
        - migrations/versions/449b6eaa75ab_create_site_settings_table.py::upgrade
        - migrations/versions/449b6eaa75ab_create_site_settings_table.py::downgrade
        - migrations/versions/997c4c43c564_initial_baseline.py::upgrade
        - migrations/versions/997c4c43c564_initial_baseline.py::downgrade
        - scripts/check_zaraz_global.py::check_zaraz
        - scripts/create_new_token.py::create_new_token
        - scripts/deploy_god_mode_token.py::deploy_token
        - scripts/enrich_cms_data.py::enrich_data
        - scripts/fix_cloudflare_token.py::fix_token
        - scripts/get_token_details.py::get_token_details
        - scripts/heartbeat_monitor.py::send_alert
        - scripts/heartbeat_monitor.py::run_check
        - scripts/list_permissions.py::list_permission_groups
        - scripts/list_tokens.py::list_tokens
        - scripts/minimal_fix_token.py::minimal_fix
        - scripts/setup_cloudflare_rules.py::list_page_rules
        - scripts/setup_cloudflare_rules.py::create_cache_everything_rule
        - scripts/setup_cloudflare_rules.py::create_vercel_bypass_rule
        - scripts/setup_zaraz.py::setup_zaraz
        - scripts/test_all_credentials.py::test_credential
        - scripts/test_new_token.py::test_new_token
        - scripts/update_token.py::update_token
        - scripts/upgrade_cloudflare_token.py::upgrade_token
        - scripts/debug/debug_meta_hashing.py::debug_hashing
        - scripts/debug/debug_turnstile_response.py::debug_turnstile

[7] ORPHAN FILES (no connections)
    * git_sync.py -- no imports and no dependents
    * main.py -- no imports and no dependents
    * main_new.py -- no imports and no dependents
    * validate_yaml.py -- no imports and no dependents
    * api/index.py -- no imports and no dependents
    * app/cache.py -- no imports and no dependents
    * app/config.py -- no imports and no dependents
    * app/database.py -- no imports and no dependents
    * app/diagnostics.py -- no imports and no dependents
    * app/limiter.py -- no imports and no dependents
    * app/maintenance.py -- no imports and no dependents
    * app/meta_capi.py -- no imports and no dependents
    * app/models.py -- no imports and no dependents
    * app/retry_queue.py -- no imports and no dependents
    * app/rudderstack.py -- no imports and no dependents
    * app/sql_queries.py -- no imports and no dependents
    * app/tracking.py -- no imports and no dependents
    * app/version.py -- no imports and no dependents
    * app/__init__.py -- no imports and no dependents
    * app/application/__init__.py -- no imports and no dependents
    * app/application/commands/create_lead.py -- no imports and no dependents
    * app/application/commands/create_visitor.py -- no imports and no dependents
    * app/application/commands/track_event.py -- no imports and no dependents
    * app/application/commands/__init__.py -- no imports and no dependents
    * app/application/commands/admin/confirm_sale_command.py -- no imports and no dependents
    * app/application/commands/identity/process_google_onetap_command.py -- no imports and no dependents
    * app/application/commands/identity/track_whatsapp_redirect_command.py -- no imports and no dependents
    * app/application/dto/lead_dto.py -- no imports and no dependents
    * app/application/dto/tracking_dto.py -- no imports and no dependents
    * app/application/dto/visitor_dto.py -- no imports and no dependents
    * app/application/dto/__init__.py -- no imports and no dependents
    * app/application/interfaces/cache_port.py -- no imports and no dependents
    * app/application/interfaces/tracker_port.py -- no imports and no dependents
    * app/application/interfaces/__init__.py -- no imports and no dependents
    * app/application/queries/get_content.py -- no imports and no dependents
    * app/application/queries/get_visitor.py -- no imports and no dependents
    * app/application/queries/list_visitors.py -- no imports and no dependents
    * app/application/queries/__init__.py -- no imports and no dependents
    * app/application/queries/admin/get_all_visitors_query.py -- no imports and no dependents
    * app/application/queries/admin/get_signal_audit_query.py -- no imports and no dependents
    * app/application/queries/seo/get_page_seo_data_query.py -- no imports and no dependents
    * app/core/decorators.py -- no imports and no dependents
    * app/core/result.py -- no imports and no dependents
    * app/core/validators.py -- no imports and no dependents
    * app/core/__init__.py -- no imports and no dependents
    * app/domain/exceptions.py -- no imports and no dependents
    * app/domain/__init__.py -- no imports and no dependents
    * app/domain/models/events.py -- no imports and no dependents
    * app/domain/models/lead.py -- no imports and no dependents
    * app/domain/models/values.py -- no imports and no dependents
    * app/domain/models/visitor.py -- no imports and no dependents
    * app/domain/models/__init__.py -- no imports and no dependents
    * app/domain/repositories/event_repo.py -- no imports and no dependents
    * app/domain/repositories/lead_repo.py -- no imports and no dependents
    * app/domain/repositories/visitor_repo.py -- no imports and no dependents
    * app/domain/repositories/__init__.py -- no imports and no dependents
    * app/infrastructure/__init__.py -- no imports and no dependents
    * app/infrastructure/cache/memory_cache.py -- no imports and no dependents
    * app/infrastructure/cache/redis_cache.py -- no imports and no dependents
    * app/infrastructure/cache/__init__.py -- no imports and no dependents
    * app/infrastructure/config/settings.py -- no imports and no dependents
    * app/infrastructure/config/__init__.py -- no imports and no dependents
    * app/infrastructure/external/meta_capi/tracker.py -- no imports and no dependents
    * app/infrastructure/external/meta_capi/__init__.py -- no imports and no dependents
    * app/infrastructure/external/rudderstack/tracker.py -- no imports and no dependents
    * app/infrastructure/external/rudderstack/__init__.py -- no imports and no dependents
    * app/infrastructure/persistence/database.py -- no imports and no dependents
    * app/infrastructure/persistence/event_repo.py -- no imports and no dependents
    * app/infrastructure/persistence/visitor_repo.py -- no imports and no dependents
    * app/infrastructure/persistence/__init__.py -- no imports and no dependents
    * app/interfaces/__init__.py -- no imports and no dependents
    * app/interfaces/api/dependencies.py -- no imports and no dependents
    * app/interfaces/api/middleware/error_handler.py -- no imports and no dependents
    * app/interfaces/api/routes/admin.py -- no imports and no dependents
    * app/interfaces/api/routes/health.py -- no imports and no dependents
    * app/interfaces/api/routes/identity.py -- no imports and no dependents
    * app/interfaces/api/routes/pages.py -- no imports and no dependents
    * app/interfaces/api/routes/seo.py -- no imports and no dependents
    * app/interfaces/api/routes/tracking.py -- no imports and no dependents
    * app/interfaces/api/routes/__init__.py -- no imports and no dependents
    * app/middleware/early_hints.py -- no imports and no dependents
    * app/middleware/identity.py -- no imports and no dependents
    * app/middleware/security.py -- no imports and no dependents
    * app/routes/health.py -- no imports and no dependents
    * app/routes/pages.py -- no imports and no dependents
    * app/routes/seo.py -- no imports and no dependents
    * app/routes/__init__.py -- no imports and no dependents
    * app/services/seo_engine.py -- no imports and no dependents
    * app/services/__init__.py -- no imports and no dependents
    * migrations/env.py -- no imports and no dependents
    * migrations/versions/449b6eaa75ab_create_site_settings_table.py -- no imports and no dependents
    * migrations/versions/997c4c43c564_initial_baseline.py -- no imports and no dependents
    * scripts/check_zaraz_global.py -- no imports and no dependents
    * scripts/create_new_token.py -- no imports and no dependents
    * scripts/deploy_god_mode_token.py -- no imports and no dependents
    * scripts/enrich_cms_data.py -- no imports and no dependents
    * scripts/fix_cloudflare_token.py -- no imports and no dependents
    * scripts/get_token_details.py -- no imports and no dependents
    * scripts/heartbeat_monitor.py -- no imports and no dependents
    * scripts/list_permissions.py -- no imports and no dependents
    * scripts/list_tokens.py -- no imports and no dependents
    * scripts/minimal_fix_token.py -- no imports and no dependents
    * scripts/setup_cloudflare_rules.py -- no imports and no dependents
    * scripts/setup_zaraz.py -- no imports and no dependents
    * scripts/update_token.py -- no imports and no dependents
    * scripts/upgrade_cloudflare_token.py -- no imports and no dependents
    * scripts/debug/debug_meta_hashing.py -- no imports and no dependents
    * scripts/debug/debug_turnstile_response.py -- no imports and no dependents

[8] IMPACT ANALYSIS - CRITICAL FILES
    app/config.py: 107 dependents, aggregate risk 0.0
    app/database.py: 44 dependents, aggregate risk 0.0
    app/tracking.py: 39 dependents, aggregate risk 0.0
    app/meta_capi.py: 26 dependents, aggregate risk 0.0

======================================================================
  AUDIT COMPLETE
======================================================================
